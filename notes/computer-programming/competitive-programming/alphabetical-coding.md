---
title: 字母编码
---

# 字母编码

[编码 - 洛谷](https://www.luogu.com.cn/problem/P1246){:target="_blank"}

此方法易于理解，没有繁杂的推导过程，且性能较佳。

总的方法是枚举生成从 `a` 到 `uvwxyz` 的所有可能单词，每生成一个即比对一遍。

### TL;DR

主要问题在于如何**进位**。进位规则如下：
1. 从低位开始数的第 $i$ 位 $(0 \le i \le 5)$ 上最大只能为 `'z' - i`。超过此值则高位（第 $i+1$ 位）进一，当前位待定；
2. 产生向前进位的数位（即上一条中的第 $i$ 位）进位后应变为第 $i+1$ 位上字母的后一个字母。
3. (2) 中的规则应从高位到低位计算。即仔细观察从 `yz` 到 `abc` 的进位原理可知，

### 详细步骤

首先将输入的字符串整理为低第 $i$ $(0 \le i \le 5)$ 位位于 `ask[i]` 的格式，并且将字母转换为对应的序号。

最低位增 1，考察进位。这里分两个步骤，第一步只考虑进位中的*高位*得数，从低到高计算；第二步只考虑进位后*此位*得数，从高到低计算。

进位处理第一步：由题目要求可知以上进位规则中的 (1)。按照此规则向高位进 1。同时 `carry` 记录一共由多少位产生了进位。若某一位未进位，则高位不再进位（即产生进位的数位一定是低位上的连续 $n$ 位）。

进位处理第二步：由题中“升序排列”的要求，在一次进位中，低位（即产生进位的数位）应变为高位上字母的后一个字母。但经过以上处理后高位可能继续产生了进位，导致当前低位的字母无法直接确定，故需要从高位到低位计算。此前已经记录了哪些位产生了进位，逐个处理即可。

最高位向前进位时，由于数组均初始化为 0，故可直接加一。

最后逐个比对，成功则打印退出，不匹配则最低位继续进一，重复以上循环。

### 举例

以 `yz` + 1 = `abc` 为例分析以上过程。注：ASCII 中 '`z`' 的下一个字符是 '`{`'。

| | 步骤 | 结果 |
|:--|:--:|--:|
| | 最低位增 1 | `y{` |
| 第一步： 
| | 第 0 位超过 `z`，进位 | `z{` |
| | 第 1 位超过 `y`，进位 | `az{` |
| 第二步： |低二位产生了进位
| | 第 1 位应为第 2 位后一字母 | `ab{` |
| | 第 0 位应为第 1 位后一字母 | `abc` |

### 性能

最长用时 7ms.

---


```c++
#include <stdio.h>
int main(void)
{
    char digit[8] = {0}, input[8], ask[8];
    int n = 0, carry, p = 0;
    bool match;
    scanf("%s", input);
    while(input[++p]);
    for(int i = 0; i < p; i++)
        ask[i] = input[p-i-1] - 'a' + 1;
    while(++n)
    {
        digit[0]++;
        // 进位处理第一步
        carry = 0;
        for(int i = 0; i < 8; i++)
        {
            if (digit[i] > 26 - i)
            {
                carry++;
                digit[i+1]++;
            }
            else break;
        }
        // 进位处理第二步
        for(int i = carry-1; i >= 0; i--)
            digit[i] = digit[i+1]+1;
        // 匹配检测
        match = true;
        for(int i = 0; i < p; i++)
        {
            if (ask[i] != digit[i])
            {
                match = false;
                break;
            }
        }
        if (match) { printf("%d", n); break; }
        if (digit[6]) { printf("0"); break; }
    }
    return 0;
}
```

---

原文载于[此处](https://www.luogu.com.cn/blog/x4Cx58x54/solution-p1246){:target="_blank"}
